#!/bin/bash
set -euo pipefail

echo "DEBUG: Current directory: $(pwd)"

# Find the Golang tarball in the current package source directory
BLOB_PATH=$(find . -maxdepth 1 -type f -name '*.tar.gz' | head -n 1)

if [[ -z "$BLOB_PATH" ]]; then
  echo "ERROR: No golang blob found in package source directory"
  exit 1
fi

echo "DEBUG: Using Golang blob: $BLOB_PATH"

# Extract Golang to /usr/local
tar -C /usr/local -xzf "$BLOB_PATH"
